"use strict";import _asyncToGenerator from"@babel/runtime/helpers/asyncToGenerator";import _regeneratorRuntime from"@babel/runtime/regenerator";require("leaflet");import"./styles/main.scss";var map,inputIp=document.getElementById("ipAddress"),searchButton=document.getElementById("searchContainer"),ipAddressContainer=document.getElementById("ipContainer"),locationContainer=document.getElementById("locationContainer"),timezoneContainer=document.getElementById("timezoneContainer"),ispContainer=document.getElementById("ispContainer"),apiKey="at_QKcZXGcamwITKpsS6OITiM3Wbd81s",apiUrl="https://geo.ipify.org/api/v2/country,city?",ipValue="";function getIp(){ipValue=inputIp.value}function getDirection(){map.remove(),getData()}inputIp.addEventListener("input",getIp),searchButton.addEventListener("click",getDirection);var getData=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t,n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(apiUrl,"apiKey=").concat(apiKey,"&ipAddress=").concat(ipValue));case 3:return t=e.sent,e.next=6,t.json();case 6:createMap(n=e.sent),putData(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),putData=function(e){var t=e.ip,n=e.location.city,a=e.location.country,o=e.location.timezone,r=e.isp;ipAddressContainer.innerText=t,locationContainer.innerText="".concat(n,", ").concat(a),timezoneContainer.innerText=o,ispContainer.innerText=r};function createMap(e){var t=e.location.lat,n=e.location.lng;map=L.map("map").setView([t,n],13),L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoiaGVuZGVyc29yIiwiYSI6ImNsMDV0ODZ0cjE2amgza3FpZm55MDFmYnkifQ.HuzZnfKV63lmuIbUn4mIpw"}).addTo(map);var a=L.icon({iconUrl:"https://res.cloudinary.com/dwdz4mn27/image/upload/v1645993313/ip-address-tracker-master/images/icon-location_mfqr7j.svg",iconSize:[36,46],iconAnchor:[18,46],shadowAnchor:[4,62],popupAnchor:[-3,-76]});L.marker([t,n],{icon:a}).addTo(map)}getData();